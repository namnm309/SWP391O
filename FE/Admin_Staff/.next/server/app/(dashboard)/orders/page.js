(()=>{var e={};e.id=2,e.ids=[2],e.modules={1022:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>w});var t=s(60687),a=s(43210),n=s(13861),l=s(62688);let i=(0,l.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),d=(0,l.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var c=s(40228),o=s(78304),x=s(29523),u=s(44493),m=s(29867),h=s(96834),p=s(48730),j=s(58869),g=s(41550),y=s(48340),v=s(63503),f=s(35950),b=s(6211),N=s(47295);function P({order:e,onClose:r}){if(!e)return null;let[s,n]=(0,a.useState)(),l=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),i=e=>new Intl.NumberFormat("vn-VN",{style:"currency",currency:"vnd"}).format(e);return(0,t.jsx)(v.lG,{open:!0,onOpenChange:r,children:(0,t.jsxs)(v.Cf,{className:"max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(v.c7,{children:[(0,t.jsx)(v.L3,{children:`Order Details - ${e.orderId}`}),(0,t.jsx)(v.rr,{children:"View detailed information about this order."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Ordered on ",l(e.orderDate)]})]}),(e=>{switch(e.toLowerCase()){case"success":return(0,t.jsx)(h.E,{className:"bg-green-100 text-green-800",children:"Completed"});case"pending":return(0,t.jsx)(h.E,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"in progress":return(0,t.jsx)(h.E,{className:"bg-blue-100 text-blue-800",children:"Processing"});case"cancelled":return(0,t.jsx)(h.E,{className:"bg-red-100 text-red-800",children:"Cancelled"});default:return(0,t.jsx)(h.E,{className:"bg-gray-100 text-gray-800",children:e})}})(e.status)]}),(0,t.jsx)(f.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium",children:"Order Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Payment Method"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(d,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:e.paymentType})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Total Amount"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:i(e.totalPrice)})]})]})]}),(0,t.jsx)(f.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium",children:"Order Items"}),(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(b.XI,{children:[(0,t.jsx)(b.A0,{children:(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nd,{children:"Product"}),(0,t.jsx)(b.nd,{children:"Quantity"}),(0,t.jsx)(b.nd,{children:"Price"}),(0,t.jsx)(b.nd,{children:"Vaccination Date"})]})}),(0,t.jsx)(b.BF,{children:s&&s.orderDetails.map(e=>(0,t.jsxs)(b.Hj,{children:[(0,t.jsx)(b.nA,{className:"font-medium",children:e.productName}),(0,t.jsx)(b.nA,{children:e.quantity}),(0,t.jsx)(b.nA,{children:i(e.price)}),(0,t.jsx)(b.nA,{children:l(e.vaccinationDate)})]},e.orderId))})]})})]}),(0,t.jsx)(f.w,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium",children:"Customer Information"}),s&&s.orderDetails.length>0&&(0,t.jsxs)("div",{className:"space-y-2 rounded-md border p-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsxs)("span",{className:"text-sm",children:[s.orderDetails[0].firstName," ",s.orderDetails[0].lastName]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:s.orderDetails[0].email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:s.orderDetails[0].mobileNo})]})]})]})]})]})})}function w(){let{toast:e}=(0,m.dj)(),[r,s]=(0,a.useState)([]),[l,h]=(0,a.useState)(!0),[p,j]=(0,a.useState)(null),g=(0,a.useCallback)(async()=>{try{h(!0);let e=localStorage.getItem("token"),r=(await N.A.get("/order/all-orders",{headers:{Authorization:`Bearer ${e}`}})).data.result||[];s(r)}catch(r){e({title:"Error",description:"Failed to load orders",variant:"destructive"})}finally{h(!1)}},[e]),y=e=>{let s=r.find(r=>r.orderId===e);s&&j(s)},v=async(r,s)=>{try{let t=localStorage.getItem("token");await N.A.put("/order/update-status-v2",null,{params:{orderId:r,status:s},headers:{Authorization:`Bearer ${t}`}}),e({title:"Success",description:"Order status updated successfully"}),await g()}catch(r){e({title:"Error",description:r?.response?.data?.message||r?.message,variant:"destructive"})}},f={IN_PROGRESS:{label:"In Progress",classes:"bg-blue-100 text-blue-800"},ORDER_RECEIVED:{label:"Order Received",classes:"bg-gray-100 text-gray-800"},OUT_FOR_STOCK:{label:"Out for Stock",classes:"bg-blue-100 text-blue-800"},CANCELLED:{label:"Cancelled",classes:"bg-red-100 text-red-800"},SUCCESS:{label:"Completed",classes:"bg-green-100 text-green-800"}},b=[{accessorKey:"orderId",header:"Order ID"},{accessorKey:"paymentType",header:"Payment Method"},{accessorKey:"totalPrice",header:"Total",cell:({row:e})=>{let r=e.getValue("totalPrice");return new Intl.NumberFormat("vn-VN",{style:"currency",currency:"vnd"}).format(r)}},{accessorKey:"orderDate",header:"Order Date",cell:({row:e})=>new Date(e.getValue("orderDate")).toLocaleDateString()},{accessorKey:"status",header:"Status",cell:({row:e})=>{let r=e.original,s=r.status.toUpperCase().replace(/ /g,"_");return(0,t.jsx)("select",{value:s,onChange:e=>v(r.orderId.toString(),e.target.value),className:`rounded border border-gray-300 p-1 ${f[s]?.classes||"bg-gray-100 text-gray-800"}`,children:Object.entries(f).map(([e,{label:r}])=>(0,t.jsx)("option",{value:e,children:r},e))})}},{id:"actions",header:"Actions",cell:({row:e})=>{let r=e.getValue("orderId");return(0,t.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>y(r),children:[(0,t.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"View"]})}}],w=r.length,S=r.reduce((e,r)=>e+r.totalPrice,0),A=r.filter(e=>"pending"===e.status.toLowerCase()).length;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Orders Management"})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{className:"pb-2",children:(0,t.jsx)(u.ZB,{className:"text-sm font-medium",children:"Total Orders"})}),(0,t.jsx)(u.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(i,{className:"mr-2 h-5 w-5 text-blue-600"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:w})]})})]}),(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{className:"pb-2",children:(0,t.jsx)(u.ZB,{className:"text-sm font-medium",children:"Total Revenue"})}),(0,t.jsx)(u.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(d,{className:"mr-2 h-5 w-5 text-green-600"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:new Intl.NumberFormat("vn-VN",{style:"currency",currency:"vnd"}).format(S)})]})})]}),(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{className:"pb-2",children:(0,t.jsx)(u.ZB,{className:"text-sm font-medium",children:"Pending Orders"})}),(0,t.jsx)(u.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.A,{className:"mr-2 h-5 w-5 text-yellow-600"}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:A})]})})]})]}),(0,t.jsxs)(u.Zp,{children:[(0,t.jsx)(u.aR,{children:(0,t.jsx)(u.ZB,{children:"All Orders"})}),(0,t.jsx)(u.Wu,{children:l?(0,t.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,t.jsx)("p",{children:"Loading orders..."})}):(0,t.jsx)(o.b,{columns:b,data:r,searchColumn:"orderId",searchPlaceholder:"Search by order ID..."})})]}),p&&(0,t.jsx)(P,{order:p,onClose:()=>j(null)})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4671:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c});var t=s(65239),a=s(48088),n=s(88170),l=s.n(n),i=s(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(r,d);let c={children:["",{children:["(dashboard)",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,51662)),"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/orders/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,57675)),"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/orders/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/orders/page",pathname:"/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},41550:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(62688).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},41868:(e,r,s)=>{Promise.resolve().then(s.bind(s,1022))},48340:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(62688).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},51662:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/orders/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/orders/page.tsx","default")},55020:(e,r,s)=>{Promise.resolve().then(s.bind(s,51662))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,169,278,437,478,474,186,209,673,883],()=>s(4671));module.exports=t})();