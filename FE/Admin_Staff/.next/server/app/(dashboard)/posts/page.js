(()=>{var e={};e.id=114,e.ids=[114],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9238:(e,s,t)=>{"use strict";t.d(s,{F:()=>i});var r=t(60687),a=t(63503);function i({title:e,description:s,isOpen:t,onClose:i,children:n}){return(0,r.jsx)(a.lG,{open:t,onOpenChange:i,children:(0,r.jsxs)(a.Cf,{className:"sm:max-w-[500px]",children:[(0,r.jsxs)(a.c7,{children:[(0,r.jsx)(a.L3,{children:e}),s&&(0,r.jsx)(a.rr,{children:s})]}),n]})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31852:(e,s,t)=>{Promise.resolve().then(t.bind(t,40248))},32556:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/posts/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/posts/page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},34729:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var r=t(60687);t(43210);var a=t(4780);function i({className:e,...s}){return(0,r.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}},40248:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var r=t(60687),a=t(43210),i=t(13861),n=t(63143),l=t(88233),d=t(96474),c=t(10022),o=t(62688);let h=(0,o.A)("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]),x=(0,o.A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var m=t(78304),p=t(29523),u=t(44493),j=t(47295),v=t(29867),g=t(58869),f=t(40228);function y({post:e,onView:s,onEdit:t,onDelete:d}){let[o,h]=(0,a.useState)(!1);return(0,r.jsxs)(u.Zp,{className:"flex h-full flex-col",children:[e.imageList.length>0&&!o?(0,r.jsx)("div",{className:"relative aspect-video overflow-hidden",children:(0,r.jsx)("img",{src:e.imageList[0]||"/placeholder.svg",alt:e.title,className:"h-full w-full object-cover transition-transform hover:scale-105",onError:()=>h(!0)})}):(0,r.jsx)("div",{className:"flex aspect-video items-center justify-center bg-muted",children:(0,r.jsx)(c.A,{className:"h-12 w-12 text-muted-foreground"})}),(0,r.jsxs)(u.aR,{className:"pb-2",children:[(0,r.jsx)(u.ZB,{className:"line-clamp-2 text-lg",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(g.A,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:e.authorName})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(f.A,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]})]}),(0,r.jsx)(u.Wu,{className:"flex-1",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:((e,s=150)=>e.length<=s?e:e.substring(0,s)+"...")(e.content)})}),(0,r.jsxs)(u.wL,{className:"flex justify-between pt-2",children:[(0,r.jsxs)(p.$,{variant:"ghost",size:"sm",onClick:()=>s(e),children:[(0,r.jsx)(i.A,{className:"mr-1 h-4 w-4"})," View"]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(p.$,{variant:"ghost",size:"sm",onClick:()=>t(e),children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}),(0,r.jsx)(p.$,{variant:"ghost",size:"sm",onClick:()=>d(e),className:"text-red-500 hover:text-red-700",children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})]})]})]})}var b=t(48730),N=t(63503),w=t(35950);function P({post:e,onClose:s}){let t=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,r.jsx)(N.lG,{open:!0,onOpenChange:s,children:(0,r.jsxs)(N.Cf,{children:[(0,r.jsxs)(N.c7,{children:[(0,r.jsx)(N.L3,{children:e.title}),(0,r.jsx)(N.rr,{children:"View detailed information about this post."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:e.authorName})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:t(e.createdAt)})]})]}),(0,r.jsx)(w.w,{}),(0,r.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:e.content}),e.imageList.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.w,{}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:"Images"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.imageList.map((e,s)=>(0,r.jsx)("div",{className:"relative aspect-video overflow-hidden rounded-md border",children:(0,r.jsx)("img",{src:e||"/placeholder.svg",alt:`Image ${s+1}`,className:"h-full w-full object-cover",onError:e=>{e.currentTarget.src="/placeholder.svg?height=200&width=300"}})},s))})]})]}),e.updatedAt!==e.createdAt&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Last updated: ",t(e.updatedAt)]}),(0,r.jsx)("div",{className:"flex justify-end space-x-2 pt-4",children:(0,r.jsx)(p.$,{variant:"outline",onClick:s,children:"Close"})})]})]})})}var A=t(9238),C=t(89667),k=t(80013),S=t(34729);function q({isOpen:e,onClose:s,onSubmit:t,post:i}){let{toast:n}=(0,v.dj)(),l=!!i,[d,c]=(0,a.useState)(""),[o,h]=(0,a.useState)(""),[x,m]=(0,a.useState)(""),[u,j]=(0,a.useState)([]),[g,f]=(0,a.useState)([]),[y,b]=(0,a.useState)(!1),N=e=>{j(s=>s.filter((s,t)=>t!==e))},w=async e=>{e.preventDefault(),b(!0);try{let e=new FormData;e.append("title",d),e.append("content",o),e.append("maincontent",x),u.forEach(s=>{e.append("file",s)}),await t(e,i?.id),n({title:"Success",description:l?"Post updated successfully":"Post created successfully"}),s()}catch(e){n({title:"Error",description:"Failed to submit post",variant:"destructive"})}finally{b(!1)}};return(0,r.jsx)(A.F,{title:l?"Update Post":"Create Post",description:l?"Update post information":"Fill in details to create a new post",isOpen:e,onClose:s,children:(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(k.J,{htmlFor:"title",children:"Title"}),(0,r.jsx)(C.p,{id:"title",name:"title",value:d,onChange:e=>c(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(k.J,{htmlFor:"content",children:"Content"}),(0,r.jsx)(S.T,{id:"content",name:"content",rows:6,value:o,onChange:e=>h(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(k.J,{htmlFor:"mainContent",children:"Main Content (optional)"}),(0,r.jsx)(S.T,{id:"mainContent",name:"mainContent",rows:3,value:x,onChange:e=>m(e.target.value)})]}),l&&g.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"Existing Images"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:g.map((e,s)=>(0,r.jsx)("div",{className:"relative aspect-video overflow-hidden rounded-md border",children:(0,r.jsx)("img",{src:e||"/placeholder.svg",alt:`Image ${s+1}`,className:"h-full w-full object-cover",onError:e=>{e.currentTarget.src="/placeholder.svg"}})},s))})]}),u.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-medium",children:"New Images to Upload"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:u.map((e,s)=>{let t=URL.createObjectURL(e);return(0,r.jsxs)("div",{className:"relative aspect-video overflow-hidden rounded-md border",children:[(0,r.jsx)("img",{src:t,alt:e.name,className:"h-full w-full object-cover"}),(0,r.jsx)(p.$,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>N(s),children:"Remove"})]},s)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(k.J,{htmlFor:"addImages",children:"Add Images"}),(0,r.jsx)(C.p,{type:"file",id:"addImages",name:"addImages",multiple:!0,accept:"image/*",onChange:e=>{e.target.files&&j(s=>[...s,...Array.from(e.target.files)])}})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,r.jsx)(p.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(p.$,{type:"submit",disabled:y,children:y?l?"Updating...":"Creating...":l?"Update Post":"Create Post"})]})]})})}function _(){let[e,s]=(0,a.useState)([]),[t,o]=(0,a.useState)(!0),[g,f]=(0,a.useState)("list"),[b,N]=(0,a.useState)(!1),[w,A]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),[S,_]=(0,a.useState)(null),L=(0,a.useCallback)(async()=>{try{o(!0);let e=(await j.A.get("/post/posts")).data||[];s(e)}catch(e){(0,v.oR)({title:"Error",description:"Failed to load posts",variant:"destructive"})}finally{o(!1)}},[v.oR]),E=e=>{_(e),k(!0)},F=async e=>{await j.A.delete(`/post/posts/${e.id}`,{headers:{"Content-Type":"multipart/form-data"}})},M=e=>{A(e),N(!0)},W=async(e,s)=>{s?await j.A.put(`/post/posts/${s}`,e,{headers:{"Content-Type":"multipart/form-data"}}):await j.A.post("/post/posts",e,{headers:{"Content-Type":"multipart/form-data"}}),await L()},$=[{accessorKey:"id",header:"ID"},{accessorKey:"title",header:"Title"},{accessorKey:"authorName",header:"Author"},{accessorKey:"updatedAt",header:"Updated",cell:({row:e})=>new Date(e.getValue("updatedAt")).toLocaleDateString()},{id:"actions",header:"Actions",cell:({row:e})=>{let s=e.original;return(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>M(s),children:(0,r.jsx)(i.A,{className:"h-4 w-4"})}),(0,r.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>E(s),children:(0,r.jsx)(n.A,{className:"h-4 w-4"})}),(0,r.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>F(s),className:"text-red-500 hover:text-red-700",children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})]})}}];return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Posts Management"}),(0,r.jsxs)(p.$,{onClick:()=>{_(null),k(!0)},children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Create Post"]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{className:"pb-2",children:(0,r.jsx)(u.ZB,{className:"text-sm font-medium",children:"Total Posts"})}),(0,r.jsx)(u.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.A,{className:"mr-2 h-5 w-5 text-blue-600"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.length})]})})]}),(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{className:"pb-2",children:(0,r.jsx)(u.ZB,{className:"text-sm font-medium",children:"Recent Posts (30 days)"})}),(0,r.jsx)(u.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.A,{className:"mr-2 h-5 w-5 text-green-600"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>new Date(e.createdAt)>=new Date(new Date().getTime()-2592e6)).length})]})})]}),(0,r.jsxs)(u.Zp,{children:[(0,r.jsx)(u.aR,{className:"pb-2",children:(0,r.jsx)(u.ZB,{className:"text-sm font-medium",children:"Posts with Images"})}),(0,r.jsx)(u.Wu,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.A,{className:"mr-2 h-5 w-5 text-purple-600"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>e.imageList.length>0).length})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"All Posts"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(p.$,{variant:"list"===g?"default":"outline",size:"sm",onClick:()=>f("list"),children:[(0,r.jsx)(h,{className:"mr-2 h-4 w-4"}),"List"]}),(0,r.jsxs)(p.$,{variant:"grid"===g?"default":"outline",size:"sm",onClick:()=>f("grid"),children:[(0,r.jsx)(x,{className:"mr-2 h-4 w-4"}),"Grid"]})]})]}),t?(0,r.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,r.jsx)("p",{children:"Loading posts..."})}):(0,r.jsx)(r.Fragment,{children:"list"===g?(0,r.jsx)(u.Zp,{children:(0,r.jsx)(u.Wu,{className:"pt-6",children:(0,r.jsx)(m.b,{columns:$,data:e,searchColumn:["title","id"],searchPlaceholder:"Search by title..."})})}):(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,r.jsx)(y,{post:e,onView:()=>M(e),onEdit:()=>E(e),onDelete:()=>F(e)},e.id))})}),b&&w&&(0,r.jsx)(P,{post:w,onClose:()=>N(!1)}),C&&(0,r.jsx)(q,{isOpen:C,onClose:()=>k(!1),onSubmit:W,post:S})]})}},45004:(e,s,t)=>{Promise.resolve().then(t.bind(t,32556))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58479:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,pages:()=>o,routeModule:()=>x,tree:()=>c});var r=t(65239),a=t(48088),i=t(88170),n=t.n(i),l=t(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(s,d);let c={children:["",{children:["(dashboard)",{children:["posts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,32556)),"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/posts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,57675)),"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/vinhnguyen/Personal_project/freelance/SW391/SWP391-FE/src/app/(dashboard)/posts/page.tsx"],h={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(dashboard)/posts/page",pathname:"/posts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},74075:e=>{"use strict";e.exports=require("zlib")},78148:(e,s,t)=>{"use strict";t.d(s,{b:()=>l});var r=t(43210),a=t(14163),i=t(60687),n=r.forwardRef((e,s)=>(0,i.jsx)(a.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var l=n},79551:e=>{"use strict";e.exports=require("url")},80013:(e,s,t)=>{"use strict";t.d(s,{J:()=>n});var r=t(60687);t(43210);var a=t(78148),i=t(4780);function n({className:e,...s}){return(0,r.jsx)(a.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},88233:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},94735:e=>{"use strict";e.exports=require("events")},96474:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(62688).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,169,278,437,478,474,186,209,673,883],()=>t(58479));module.exports=r})();