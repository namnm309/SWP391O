(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{73998:(e,s,r)=>{Promise.resolve().then(r.bind(r,79746))},79746:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var a=r(95155),l=r(12115),t=r(92657),n=r(13770),c=r(30285),i=r(66695),d=r(87481),h=r(88473),o=r(90010),u=r(50039);function x(){let{toast:e}=(0,d.dj)(),[s,r]=(0,l.useState)([]),[x,m]=(0,l.useState)(!0),[j,f]=(0,l.useState)(null),[y,p]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),[N,b]=(0,l.useState)(null),S=async()=>{try{m(!0);let e=localStorage.getItem("token"),s=await h.A.get("/manage/parents",{headers:{Authorization:"Bearer ".concat(e)}}),a=s.data.result||s.data||[];r(a)}catch(s){e({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{m(!1)}};(0,l.useEffect)(()=>{S()},[e]);let k=e=>{let r=s.find(s=>s.id===e);r&&(f(r),p(!0))},C=async()=>{if(N)try{r(e=>e.filter(e=>e.id!==N)),e({title:"Success",description:"User deleted successfully"})}catch(s){e({title:"Error",description:"Failed to delete user",variant:"destructive"})}finally{b(null),g(!1)}},E=[{accessorKey:"id",header:"ID"},{accessorKey:"fullname",header:"Name"},{accessorKey:"username",header:"Username"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"gender",header:"Gender"},{id:"actions",header:"Actions",cell:e=>{let{row:s}=e,r=s.getValue("id");return(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>k(r),children:(0,a.jsx)(t.A,{className:"h-4 w-4"})})})}}];return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"User Management"})}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"All Users"})}),(0,a.jsx)(i.Wu,{children:x?(0,a.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,a.jsx)("p",{children:"Loading users..."})}):(0,a.jsx)(n.b,{columns:E,data:s,searchColumn:"fullname",searchPlaceholder:"Search by name..."})})]}),(0,a.jsx)(u.P,{isOpen:y,onClose:()=>p(!1),user:j}),(0,a.jsx)(o.Lt,{open:v,onOpenChange:g,children:(0,a.jsxs)(o.EO,{children:[(0,a.jsxs)(o.wd,{children:[(0,a.jsx)(o.r7,{children:"Are you sure?"}),(0,a.jsx)(o.$v,{children:"This action cannot be undone. This will permanently delete the user and remove their data from our servers."})]}),(0,a.jsxs)(o.ck,{children:[(0,a.jsx)(o.Zr,{children:"Cancel"}),(0,a.jsx)(o.Rx,{onClick:C,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[204,821,300,767,71,150,884,44,441,684,358],()=>s(73998)),_N_E=e.O()}]);