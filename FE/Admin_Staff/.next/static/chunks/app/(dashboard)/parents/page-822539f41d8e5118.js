(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{12318:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(19946).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},23632:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var l=a(95155),n=a(12115),r=a(92657),t=a(12318),i=a(13770),c=a(30285),d=a(66695),o=a(87481),u=a(90010),h=a(50039),m=a(46262),x=a(62523),p=a(85057),j=a(88473);function v(e){let{onClose:s}=e,{toast:a}=(0,o.dj)(),[r,t]=(0,n.useState)({username:"",fullname:"",email:"",phone:"",bod:"",gender:""}),[i,d]=(0,n.useState)(!1),u=e=>{let{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))},h=async e=>{e.preventDefault(),d(!0);try{await j.A.post("/manage/create-customer",r,{headers:{"Content-Type":"application/json"}}),a({title:"Success",description:"Patient created successfully"}),s()}catch(e){var l,n;a({title:"Error",description:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)||e.message,variant:"destructive"})}finally{d(!1)}};return(0,l.jsx)(m.F,{title:"Create Patient",description:"Fill in the details to create a new patient (customer)",isOpen:!0,onClose:s,children:(0,l.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(p.J,{htmlFor:"username",children:"Username"}),(0,l.jsx)(x.p,{id:"username",name:"username",value:r.username,onChange:u,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(p.J,{htmlFor:"fullname",children:"Full Name"}),(0,l.jsx)(x.p,{id:"fullname",name:"fullname",value:r.fullname,onChange:u,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(p.J,{htmlFor:"email",children:"Email"}),(0,l.jsx)(x.p,{id:"email",name:"email",type:"email",value:r.email,onChange:u,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(p.J,{htmlFor:"phone",children:"Phone"}),(0,l.jsx)(x.p,{id:"phone",name:"phone",value:r.phone,onChange:u,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(p.J,{htmlFor:"bod",children:"Date of Birth"}),(0,l.jsx)(x.p,{id:"bod",name:"bod",type:"date",value:r.bod,onChange:u,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(p.J,{htmlFor:"gender",children:"Gender"}),(0,l.jsx)(x.p,{id:"gender",name:"gender",placeholder:"Male / Female / Other",value:r.gender,onChange:u,required:!0})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,l.jsx)(c.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,l.jsx)(c.$,{type:"submit",disabled:i,children:i?"Creating...":"Create Patient"})]})]})})}var y=a(6277);function f(){let{toast:e}=(0,o.dj)(),s=(0,y.P)(e=>e.fetchAllUsers),[a,m]=(0,n.useState)([]),[x,p]=(0,n.useState)(!0),[j,f]=(0,n.useState)(null),[g,b]=(0,n.useState)(!1),[C,N]=(0,n.useState)(!1),[w,k]=(0,n.useState)(null),[F,S]=(0,n.useState)(!1),P=async()=>{try{p(!0);let e=await s();m(e)}catch(s){e({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{p(!1)}};(0,n.useEffect)(()=>{P()},[e]);let A=e=>{let s=a.find(s=>s.id===e);s&&(f(s),b(!0))},E=async()=>{if(w)try{m(e=>e.filter(e=>e.id!==w)),e({title:"Success",description:"User deleted successfully"})}catch(s){e({title:"Error",description:"Failed to delete user",variant:"destructive"})}finally{k(null),N(!1)}},O=[{accessorKey:"id",header:"ID"},{accessorKey:"fullname",header:"Name"},{accessorKey:"username",header:"Username"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"gender",header:"Gender",cell:e=>{let{row:s}=e;return(0,l.jsx)("span",{className:"capitalize",children:s.getValue("gender")||"-"})}},{id:"actions",header:"Actions",cell:e=>{let{row:s}=e,a=s.getValue("id");return(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>A(a),children:(0,l.jsx)(r.A,{className:"h-4 w-4"})})})}}];return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"User Management"}),(0,l.jsxs)(c.$,{onClick:()=>S(!0),children:[(0,l.jsx)(t.A,{className:"mr-2 h-4 w-4"}),"Add User"]})]}),(0,l.jsxs)(d.Zp,{children:[(0,l.jsx)(d.aR,{children:(0,l.jsx)(d.ZB,{children:"All Users"})}),(0,l.jsx)(d.Wu,{children:x?(0,l.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,l.jsx)("p",{children:"Loading users..."})}):(0,l.jsx)(i.b,{columns:O,data:a,searchColumn:"fullname",searchPlaceholder:"Search by name..."})})]}),(0,l.jsx)(h.P,{isOpen:g,onClose:()=>b(!1),user:j}),F&&(0,l.jsx)(v,{onClose:()=>S(!1)}),(0,l.jsx)(u.Lt,{open:C,onOpenChange:N,children:(0,l.jsxs)(u.EO,{children:[(0,l.jsxs)(u.wd,{children:[(0,l.jsx)(u.r7,{children:"Are you sure?"}),(0,l.jsx)(u.$v,{children:"This action cannot be undone. This will permanently delete the user and remove their data from our servers."})]}),(0,l.jsxs)(u.ck,{children:[(0,l.jsx)(u.Zr,{children:"Cancel"}),(0,l.jsx)(u.Rx,{onClick:E,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})}},40968:(e,s,a)=>{"use strict";a.d(s,{b:()=>i});var l=a(12115),n=a(63655),r=a(95155),t=l.forwardRef((e,s)=>(0,r.jsx)(n.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));t.displayName="Label";var i=t},46262:(e,s,a)=>{"use strict";a.d(s,{F:()=>r});var l=a(95155),n=a(54165);function r(e){let{title:s,description:a,isOpen:r,onClose:t,children:i}=e;return(0,l.jsx)(n.lG,{open:r,onOpenChange:t,children:(0,l.jsxs)(n.Cf,{className:"max-h-[90vh] min-w-[60svw] overflow-y-auto",children:[(0,l.jsxs)(n.c7,{children:[(0,l.jsx)(n.L3,{children:s}),a&&(0,l.jsx)(n.rr,{children:a})]}),i]})})}},73998:(e,s,a)=>{Promise.resolve().then(a.bind(a,23632))},85057:(e,s,a)=>{"use strict";a.d(s,{J:()=>t});var l=a(95155);a(12115);var n=a(40968),r=a(59434);function t(e){let{className:s,...a}=e;return(0,l.jsx)(n.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[747,716,767,71,150,758,884,277,44,441,684,358],()=>s(73998)),_N_E=e.O()}]);