(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{12318:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(19946).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},73998:(e,s,r)=>{Promise.resolve().then(r.bind(r,79746))},79746:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>y});var a=r(95155),l=r(12115),t=r(92657),n=r(12318),c=r(13770),i=r(30285),d=r(66695),h=r(87481),o=r(88473),u=r(90010),x=r(50039);function y(){let{toast:e}=(0,h.dj)(),[s,r]=(0,l.useState)([]),[y,m]=(0,l.useState)(!0),[j,f]=(0,l.useState)(null),[p,v]=(0,l.useState)(!1),[g,k]=(0,l.useState)(!1),[N,b]=(0,l.useState)(null),A=async()=>{try{m(!0);let e=localStorage.getItem("token"),s=await o.A.get("/manage/parents",{headers:{Authorization:"Bearer ".concat(e)}}),a=s.data.result||s.data||[];r(a)}catch(s){e({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{m(!1)}};(0,l.useEffect)(()=>{A()},[e]);let C=e=>{let r=s.find(s=>s.id===e);r&&(f(r),v(!0))},S=async()=>{if(N)try{r(e=>e.filter(e=>e.id!==N)),e({title:"Success",description:"User deleted successfully"})}catch(s){e({title:"Error",description:"Failed to delete user",variant:"destructive"})}finally{b(null),k(!1)}},w=[{accessorKey:"id",header:"ID"},{accessorKey:"fullname",header:"Name"},{accessorKey:"username",header:"Username"},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"gender",header:"Gender",cell:e=>{let{row:s}=e;return(0,a.jsx)("span",{className:"capitalize",children:s.getValue("gender")||"-"})}},{id:"actions",header:"Actions",cell:e=>{let{row:s}=e,r=s.getValue("id");return(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>C(r),children:(0,a.jsx)(t.A,{className:"h-4 w-4"})})})}}];return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"User Management"}),(0,a.jsxs)(i.$,{onClick:()=>{},children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4"}),"Add User"]})]}),(0,a.jsxs)(d.Zp,{children:[(0,a.jsx)(d.aR,{children:(0,a.jsx)(d.ZB,{children:"All Users"})}),(0,a.jsx)(d.Wu,{children:y?(0,a.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,a.jsx)("p",{children:"Loading users..."})}):(0,a.jsx)(c.b,{columns:w,data:s,searchColumn:"fullname",searchPlaceholder:"Search by name..."})})]}),(0,a.jsx)(x.P,{isOpen:p,onClose:()=>v(!1),user:j}),(0,a.jsx)(u.Lt,{open:g,onOpenChange:k,children:(0,a.jsxs)(u.EO,{children:[(0,a.jsxs)(u.wd,{children:[(0,a.jsx)(u.r7,{children:"Are you sure?"}),(0,a.jsx)(u.$v,{children:"This action cannot be undone. This will permanently delete the user and remove their data from our servers."})]}),(0,a.jsxs)(u.ck,{children:[(0,a.jsx)(u.Zr,{children:"Cancel"}),(0,a.jsx)(u.Rx,{onClick:S,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[204,821,300,767,71,150,884,44,441,684,358],()=>s(73998)),_N_E=e.O()}]);