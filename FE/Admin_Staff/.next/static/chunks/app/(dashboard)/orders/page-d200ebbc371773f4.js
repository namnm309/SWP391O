(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{14186:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},19420:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},22346:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var s=a(95155);a(12115);var r=a(87489),l=a(59434);function n(e){let{className:t,orientation:a="horizontal",decorative:n=!0,...i}=e;return(0,s.jsx)(r.b,{"data-slot":"separator-root",decorative:n,orientation:a,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}},26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>c});var s=a(95155);a(12115);var r=a(99708),l=a(74466),n=a(59434);let i=(0,l.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,asChild:l=!1,...c}=e,d=l?r.DX:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(i({variant:a}),t),...c})}},28883:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>o,L3:()=>u,c7:()=>x,lG:()=>i,rr:()=>m});var s=a(95155);a(12115);var r=a(15452),l=a(54416),n=a(59434);function i(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"dialog",...t})}function c(e){let{...t}=e;return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",t),...a})}function o(e){let{className:t,children:a,...i}=e;return(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(d,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg min-w-fit",t),...i,children:[a,(0,s.jsxs)(r.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}},54696:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(95155),r=a(12115),l=a(92657),n=a(19946);let i=(0,n.A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),c=(0,n.A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var d=a(69074),o=a(13770),x=a(30285),u=a(66695),m=a(87481),h=a(26126),g=a(14186),p=a(71007),v=a(28883),j=a(19420),y=a(54165),f=a(22346),b=a(85127),N=a(88473);function w(e){let{order:t,onClose:a}=e;if(!t)return null;let[l,n]=(0,r.useState)();(0,r.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("token"),a=(await N.A.get("/order/order/".concat(t.orderId),{headers:{Authorization:"Bearer ".concat(e)}})).data.result;n(a)}catch(e){(0,m.oR)({title:"Error",description:"Failed to load orders",variant:"destructive"})}})()},[m.oR]);let i=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d=e=>new Intl.NumberFormat("vn-VN",{style:"currency",currency:"vnd"}).format(e);return(0,s.jsx)(y.lG,{open:!0,onOpenChange:a,children:(0,s.jsxs)(y.Cf,{className:"max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(y.c7,{children:[(0,s.jsx)(y.L3,{children:"Order Details - ".concat(t.orderId)}),(0,s.jsx)(y.rr,{children:"View detailed information about this order."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["Ordered on ",i(t.orderDate)]})]}),(e=>{switch(e.toLowerCase()){case"success":return(0,s.jsx)(h.E,{className:"bg-green-100 text-green-800",children:"Completed"});case"pending":return(0,s.jsx)(h.E,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"in progress":return(0,s.jsx)(h.E,{className:"bg-blue-100 text-blue-800",children:"Processing"});case"cancelled":return(0,s.jsx)(h.E,{className:"bg-red-100 text-red-800",children:"Cancelled"});default:return(0,s.jsx)(h.E,{className:"bg-gray-100 text-gray-800",children:e})}})(t.status)]}),(0,s.jsx)(f.w,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Order Summary"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Payment Method"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(c,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm",children:t.paymentType})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Total Amount"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:d(t.totalPrice)})]})]})]}),(0,s.jsx)(f.w,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Order Items"}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(b.XI,{children:[(0,s.jsx)(b.A0,{children:(0,s.jsxs)(b.Hj,{children:[(0,s.jsx)(b.nd,{children:"Product"}),(0,s.jsx)(b.nd,{children:"Quantity"}),(0,s.jsx)(b.nd,{children:"Price"}),(0,s.jsx)(b.nd,{children:"Vaccination Date"})]})}),(0,s.jsx)(b.BF,{children:l&&l.orderDetails.map(e=>(0,s.jsxs)(b.Hj,{children:[(0,s.jsx)(b.nA,{className:"font-medium",children:e.productName}),(0,s.jsx)(b.nA,{children:e.quantity}),(0,s.jsx)(b.nA,{children:d(e.price)}),(0,s.jsx)(b.nA,{children:i(e.vaccinationDate)})]},e.orderId))})]})})]}),(0,s.jsx)(f.w,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Customer Information"}),l&&l.orderDetails.length>0&&(0,s.jsxs)("div",{className:"space-y-2 rounded-md border p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsxs)("span",{className:"text-sm",children:[l.orderDetails[0].firstName," ",l.orderDetails[0].lastName]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm",children:l.orderDetails[0].email})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.A,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm",children:l.orderDetails[0].mobileNo})]})]})]})]})]})})}function k(){let{toast:e}=(0,m.dj)(),[t,a]=(0,r.useState)([]),[n,h]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null),v=(0,r.useCallback)(async()=>{try{h(!0);let e=localStorage.getItem("token"),t=(await N.A.get("/order/all-orders",{headers:{Authorization:"Bearer ".concat(e)}})).data.result||[];a(t)}catch(t){e({title:"Error",description:"Failed to load orders",variant:"destructive"})}finally{h(!1)}},[e]);(0,r.useEffect)(()=>{v()},[v]);let j=e=>{let a=t.find(t=>t.orderId===e);a&&p(a)},y=async(t,a)=>{try{let s=localStorage.getItem("token");await N.A.put("/order/update-status-v2",null,{params:{orderId:t,status:a},headers:{Authorization:"Bearer ".concat(s)}}),e({title:"Success",description:"Order status updated successfully"}),await v()}catch(t){var s,r;e({title:"Error",description:(null==t?void 0:null===(r=t.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||(null==t?void 0:t.message),variant:"destructive"})}},f={IN_PROGRESS:{label:"In Progress",classes:"bg-blue-100 text-blue-800"},ORDER_RECEIVED:{label:"Order Received",classes:"bg-gray-100 text-gray-800"},OUT_FOR_STOCK:{label:"Out for Stock",classes:"bg-blue-100 text-blue-800"},CANCELLED:{label:"Cancelled",classes:"bg-red-100 text-red-800"},SUCCESS:{label:"Completed",classes:"bg-green-100 text-green-800"}},b=[{accessorKey:"orderId",header:"Order ID"},{accessorKey:"paymentType",header:"Payment Method"},{accessorKey:"totalPrice",header:"Total",cell:e=>{let{row:t}=e,a=t.getValue("totalPrice");return new Intl.NumberFormat("vn-VN",{style:"currency",currency:"vnd"}).format(a)}},{accessorKey:"orderDate",header:"Order Date",cell:e=>{let{row:t}=e;return new Date(t.getValue("orderDate")).toLocaleDateString()}},{accessorKey:"status",header:"Status",cell:e=>{var t;let{row:a}=e,r=a.original,l=r.status.toUpperCase().replace(/ /g,"_");return(0,s.jsx)("select",{value:l,onChange:e=>y(r.orderId.toString(),e.target.value),className:"rounded border border-gray-300 p-1 ".concat((null===(t=f[l])||void 0===t?void 0:t.classes)||"bg-gray-100 text-gray-800"),children:Object.entries(f).map(e=>{let[t,{label:a}]=e;return(0,s.jsx)("option",{value:t,children:a},t)})})}},{id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.getValue("orderId");return(0,s.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>j(a),children:[(0,s.jsx)(l.A,{className:"mr-2 h-4 w-4"}),"View"]})}}],k=t.length,A=t.reduce((e,t)=>e+t.totalPrice,0),C=t.filter(e=>"pending"===e.status.toLowerCase()).length;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Orders Management"})}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{className:"pb-2",children:(0,s.jsx)(u.ZB,{className:"text-sm font-medium",children:"Total Orders"})}),(0,s.jsx)(u.Wu,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i,{className:"mr-2 h-5 w-5 text-blue-600"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:k})]})})]}),(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{className:"pb-2",children:(0,s.jsx)(u.ZB,{className:"text-sm font-medium",children:"Total Revenue"})}),(0,s.jsx)(u.Wu,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c,{className:"mr-2 h-5 w-5 text-green-600"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:new Intl.NumberFormat("vn-VN",{style:"currency",currency:"vnd"}).format(A)})]})})]}),(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{className:"pb-2",children:(0,s.jsx)(u.ZB,{className:"text-sm font-medium",children:"Pending Orders"})}),(0,s.jsx)(u.Wu,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(d.A,{className:"mr-2 h-5 w-5 text-yellow-600"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:C})]})})]})]}),(0,s.jsxs)(u.Zp,{children:[(0,s.jsx)(u.aR,{children:(0,s.jsx)(u.ZB,{children:"All Orders"})}),(0,s.jsx)(u.Wu,{children:n?(0,s.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,s.jsx)("p",{children:"Loading orders..."})}):(0,s.jsx)(o.b,{columns:b,data:t,searchColumn:"orderId",searchPlaceholder:"Search by order ID..."})})]}),g&&(0,s.jsx)(w,{order:g,onClose:()=>p(null)})]})}},69074:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71007:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},87489:(e,t,a)=>{"use strict";a.d(t,{b:()=>d});var s=a(12115),r=a(63655),l=a(95155),n="horizontal",i=["horizontal","vertical"],c=s.forwardRef((e,t)=>{var a;let{decorative:s,orientation:c=n,...d}=e,o=(a=c,i.includes(a))?c:n;return(0,l.jsx)(r.sG.div,{"data-orientation":o,...s?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...d,ref:t})});c.displayName="Separator";var d=c},88420:(e,t,a)=>{Promise.resolve().then(a.bind(a,54696))},92657:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[204,821,300,767,71,150,884,441,684,358],()=>t(88420)),_N_E=e.O()}]);