(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[919],{20173:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var l=a(95155),r=a(12115),t=a(92657),n=a(13770),c=a(30285),i=a(66695),d=a(87481),h=a(88473),u=a(90010),o=a(50039);function x(){let{toast:e}=(0,d.dj)(),[s,a]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[j,f]=(0,r.useState)(null),[p,y]=(0,r.useState)(!1),[v,g]=(0,r.useState)(!1),[N,b]=(0,r.useState)(null),S=async()=>{try{m(!0);let e=localStorage.getItem("token"),s=await h.A.get("/manage/parents",{headers:{Authorization:"Bearer ".concat(e)}}),l=s.data.result||s.data||[];a(l)}catch(s){e({title:"Error",description:"Failed to load users",variant:"destructive"})}finally{m(!1)}};(0,r.useEffect)(()=>{S()},[e]);let k=e=>{let a=s.find(s=>s.id===e);a&&(f(a),y(!0))},C=async()=>{if(N)try{a(e=>e.filter(e=>e.id!==N)),e({title:"Success",description:"User deleted successfully"})}catch(s){e({title:"Error",description:"Failed to delete user",variant:"destructive"})}finally{b(null),g(!1)}},E=[{accessorKey:"id",header:"ID"},{accessorKey:"fullname",header:"Name",cell:e=>{let{row:s}=e;return(0,l.jsx)("span",{className:"capitalize",children:s.getValue("fullname")})}},{accessorKey:"email",header:"Email"},{accessorKey:"phone",header:"Phone"},{accessorKey:"gender",header:"Gender",cell:e=>{let{row:s}=e;return(0,l.jsx)("span",{className:"capitalize",children:s.getValue("gender")||"-"})}},{id:"actions",header:"Actions",cell:e=>{let{row:s}=e,a=s.getValue("id");return(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>k(a),children:(0,l.jsx)(t.A,{className:"h-4 w-4"})})})}}];return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"User Management"})}),(0,l.jsxs)(i.Zp,{children:[(0,l.jsx)(i.aR,{children:(0,l.jsx)(i.ZB,{children:"All Users"})}),(0,l.jsx)(i.Wu,{children:x?(0,l.jsx)("div",{className:"flex h-40 items-center justify-center",children:(0,l.jsx)("p",{children:"Loading users..."})}):(0,l.jsx)(n.b,{columns:E,data:s,searchColumn:"fullname",searchPlaceholder:"Search by name..."})})]}),(0,l.jsx)(o.P,{isOpen:p,onClose:()=>y(!1),user:j}),(0,l.jsx)(u.Lt,{open:v,onOpenChange:g,children:(0,l.jsxs)(u.EO,{children:[(0,l.jsxs)(u.wd,{children:[(0,l.jsx)(u.r7,{children:"Are you sure?"}),(0,l.jsx)(u.$v,{children:"This action cannot be undone. This will permanently delete the user and remove their data from our servers."})]}),(0,l.jsxs)(u.ck,{children:[(0,l.jsx)(u.Zr,{children:"Cancel"}),(0,l.jsx)(u.Rx,{onClick:C,className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})}},67431:(e,s,a)=>{Promise.resolve().then(a.bind(a,20173))}},e=>{var s=s=>e(e.s=s);e.O(0,[204,821,300,767,71,150,884,44,441,684,358],()=>s(67431)),_N_E=e.O()}]);